(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d065da5c"],{"0983":function(t,s,o){t.exports=o.p+"img/list-type.605d4ebb.svg"},1373:function(t,s,o){},"17ee":function(t,s,o){"use strict";var e=o("1373"),i=o.n(e);i.a},2374:function(t,s,o){"use strict";var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{ref:"goods",staticClass:"goods",class:[t.layoutClass,{"goods-scroll":t.isScroll}],style:{height:t.goodsViewHeight},on:{scroll:t.onScrollChange}},t._l(t.sortGoodsData,function(s,e){return o("div",{key:e,ref:"goodsItem",refInFor:!0,staticClass:"goods-item",class:t.layoutItemClass,style:t.goodsItemStyles[e],on:{click:function(o){return t.onGoodsItemClick(s)}}},[o("img",{staticClass:"goods-item-img",style:t.imgStyles[e],attrs:{src:s.img,alt:"",srcset:""}}),o("div",{staticClass:"goods-item-desc"},[o("p",{staticClass:"goods-item-desc-name",class:{"goods-item-desc-name-hint":!s.isHave}},[s.isDirect?o("direct"):t._e(),s.isHave?t._e():o("no-have"),t._v("\n        "+t._s(s.name)+"\n      ")],1),o("div",{staticClass:"goods-item-desc-data"},[o("p",{staticClass:"goods-item-desc-data-price"},[t._v("￥"+t._s(t._f("priceValue")(s.price)))]),o("p",{staticClass:"goods-item-desc-data-volume"},[t._v("销量："+t._s(s.volume))])])])])}),0)},i=[],n=(o("ac6a"),o("55dd"),o("408a")),a=o("b5bc"),c={components:{direct:n["a"],NoHave:a["a"]},props:{sort:{type:String,default:"1"},layoutType:{type:String,default:"1"},isScroll:{type:Boolean,default:!0}},data:function(){return{MIN_IMG_HEIGHT:178,MAX_IMG_HEIGHT:230,goodsData:[],layoutClass:"goods-list",layoutItemClass:"goods-list-item",sortGoodsData:[],goodsViewHeight:"100%",itemMarginBottomSize:8,imgStyles:[],goodsItemStyles:[],scrollTopValue:0}},created:function(){this.initData()},activated:function(){this.$refs.goods.scrollTop=this.scrollTopValue},methods:{initData:function(){var t=this;this.$http.get("/goods").then(function(s){t.goodsData=s.list,t.setSortGoodsData(),t.initLayout()})},setSortGoodsData:function(){switch(this.sort){case"1":this.sortGoodsData=this.goodsData.slice(0);break;case"1-2":this.getSortGoodsDataFromKey("price");break;case"1-3":this.getSortGoodsDataFromKey("volume");break;case"2":this.getSortGoodsDataFromKey("isHave");break;case"3":this.getSortGoodsDataFromKey("isDirect");break}},initLayout:function(){var t=this;switch(this.goodsViewHeight="100%",this.goodsItemStyles=[],this.imgStyles=[],this.layoutType){case"1":this.layoutClass="goods-list",this.layoutItemClass="goods-list-item";break;case"2":this.layoutClass="goods-grid",this.layoutItemClass="goods-grid-item";break;case"3":this.layoutClass="goods-waterfall",this.layoutItemClass="goods-waterfall-item",this.initImgStyles(),this.$nextTick(function(){t.initWaterfall()});break}},getSortGoodsDataFromKey:function(t){return this.sortGoodsData.sort(function(s,o){var e=s[t],i=o[t];return"boolean"===typeof e?e?-1:i?1:0:parseFloat(e)>=parseFloat(i)?-1:1})},imgHeight:function(){var t=Math.floor(Math.random()*(this.MAX_IMG_HEIGHT-this.MIN_IMG_HEIGHT)+this.MIN_IMG_HEIGHT);return t},initImgStyles:function(){var t=this;this.goodsData.forEach(function(s){t.imgStyles.push({height:t.imgHeight()+"px"})})},initWaterfall:function(){var t=this,s=this.$refs.goodsItem;if(s){var o=0,e=0;s.forEach(function(s,i){var n={},a=s.clientHeight+t.itemMarginBottomSize;o<=e?(n={left:"0px",top:o+"px"},o+=a):(n={right:"0px",top:e+"px"},e+=a),t.goodsItemStyles.push(n)}),this.isScroll||(this.goodsViewHeight=(o>e+48?o:e+48)+"px")}},onGoodsItemClick:function(t){t.isHave?(this.$store.commit("setSelectGoods",t),this.$router.push({name:"goodsDetails",params:{routerType:"push",goods:t}})):alert("该商品暂无库存")},onScrollChange:function(t){this.scrollTopValue=t.target.scrollTop}},watch:{sort:function(){this.setSortGoodsData()},layoutType:function(){this.initLayout()}}},l=c,r=(o("379f"),o("2877")),u=Object(r["a"])(l,e,i,!1,null,"45210d39",null);s["a"]=u.exports},"2f21":function(t,s,o){"use strict";var e=o("79e5");t.exports=function(t,s){return!!t&&e(function(){s?t.call(null,function(){},1):t.call(null)})}},"33f6":function(t,s,o){t.exports=o.p+"img/waterfall-type.0575742f.svg"},3472:function(t,s,o){},"379f":function(t,s,o){"use strict";var e=o("3472"),i=o.n(e);i.a},"408a":function(t,s,o){"use strict";var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("span",{staticClass:"goods-item-name-direct"},[t._v("直营")])},i=[],n={},a=n,c=(o("e33b"),o("2877")),l=Object(c["a"])(a,e,i,!1,null,"56c5639a",null);s["a"]=l.exports},"4eb5":function(t,s,o){},"55dd":function(t,s,o){"use strict";var e=o("5ca1"),i=o("d8e8"),n=o("4bf8"),a=o("79e5"),c=[].sort,l=[1,2,3];e(e.P+e.F*(a(function(){l.sort(void 0)})||!a(function(){l.sort(null)})||!o("2f21")(c)),"Array",{sort:function(t){return void 0===t?c.call(n(this)):c.call(n(this),i(t))}})},7340:function(t,s,o){"use strict";var e=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"nav-bar z-index-max",class:[{"iphonex-top":t.isIphoneX},{"bottom-line":t.pageName}],style:t.navBarStyle},[e("div",{staticClass:"left",on:{click:function(s){return t.$emit("onLeftClick")}}},[t.isDefault&&t.isShowBack?e("img",{attrs:{src:o("a11e"),alt:"",srcset:""}}):t._e(),t._t("nav-left")],2),e("div",{staticClass:"center"},[t.isDefault?e("span",{staticClass:"page-title"},[t._v(t._s(t.pageName))]):t._e(),t._t("nav-center")],2),e("div",{staticClass:"right"},[t._t("nav-right")],2)])},i=[],n={props:{isDefault:{default:!0,type:Boolean},isShowBack:{default:!0,type:Boolean},pageName:{default:"",type:String},navBarStyle:{backgroundColor:"",position:"fixed"}},data:function(){return{isIphoneX:window.isIphoneX}}},a=n,c=(o("aa02"),o("2877")),l=Object(c["a"])(a,e,i,!1,null,"3bde5085",null);s["a"]=l.exports},"7d4b":function(t,s,o){},9759:function(t,s,o){t.exports=o.p+"img/options-select.0e23a25a.svg"},"97b7":function(t,s,o){},a11e:function(t,s,o){t.exports=o.p+"img/back.b6cb4d8f.svg"},aa02:function(t,s,o){"use strict";var e=o("97b7"),i=o.n(e);i.a},ac6a:function(t,s,o){for(var e=o("cadf"),i=o("0d58"),n=o("2aba"),a=o("7726"),c=o("32e9"),l=o("84f2"),r=o("2b4c"),u=r("iterator"),d=r("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=i(h),g=0;g<f.length;g++){var m,y=f[g],v=h[y],C=a[y],S=C&&C.prototype;if(S&&(S[u]||c(S,u,p),S[d]||c(S,d,y),l[y]=p,v))for(m in e)S[m]||n(S,m,e[m],!0)}},b5bc:function(t,s,o){"use strict";var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("span",{staticClass:"goods-item-name-no-have"},[t._v("缺货")])},i=[],n={},a=n,c=(o("17ee"),o("2877")),l=Object(c["a"])(a,e,i,!1,null,"d1ee3f88",null);s["a"]=l.exports},c9eb:function(t,s,o){"use strict";var e=o("e3f1"),i=o.n(e);i.a},d2d3:function(t,s,o){"use strict";o.r(s);var e=function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("div",{staticClass:"goods-list-page"},[o("navgation-bar",{attrs:{pageName:"商品列表"},on:{onLeftClick:t.onBackClick},scopedSlots:t._u([{key:"nav-right",fn:function(){return[o("img",{attrs:{src:t.layoutType.icon},on:{click:function(s){return t.onChangelayoutTypeClick()}}})]},proxy:!0}])}),o("div",{staticClass:"goods-list-page-content",class:{"iphonex-bottom":t.isIphoneX}},[o("goods-options",{on:{optionsChange:t.onOptionsChange}}),o("goods",{attrs:{sort:t.sortType,layoutType:t.layoutType.type}})],1)],1)},i=[],n=o("7340"),a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"goods-options  z-index-2"},[e("ul",{staticClass:"goods-options-list"},t._l(t.optionsDatas,function(s,o){return e("li",{key:o,staticClass:"goods-options-item"},[e("a",{staticClass:"goods-options-item-content",on:{click:function(e){return t.onOptionsItemClick(s,o)}}},[e("span",{staticClass:"goods-options-item-content-name",class:{"goods-options-item-content-name-active":t.selectOption.id===s.id}},[t._v(t._s(s.name))]),s.subs.length>0?e("span",{staticClass:"goods-options-item-content-caret caret",class:[t.isShowSubContent&&t.selectOption.id===s.id?"goods-options-item-content-caret-open":"goods-options-item-content-caret-close"]}):t._e()])])}),0),e("transition",{attrs:{name:"fold-height"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSubContent,expression:"isShowSubContent"}],staticClass:"options-sub-content z-index-2"},[e("ul",{staticClass:"options-sub-content-list"},t._l(t.selectOption.subs,function(s,i){return e("li",{key:i,staticClass:"options-sub-content-list-item",on:{click:function(o){return t.onSubOptionsItemClick(s,i)}}},[e("a",{staticClass:"options-sub-content-list-item-content"},[e("span",{staticClass:"options-sub-content-list-item-content-name",class:{"options-sub-content-list-item-content-name-active":t.selectOption.id===s.id}},[t._v(t._s(s.name))]),e("img",{directives:[{name:"show",rawName:"v-show",value:t.selectOption.id===s.id,expression:"selectOption.id === item.id"}],staticClass:"options-sub-content-list-item-content-select",attrs:{src:o("9759"),alt:"",srcset:""}})])])}),0)])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSubContent,expression:"isShowSubContent"}],staticClass:"cover",on:{click:function(s){t.isShowSubContent=!1}}})],1)},c=[],l=(o("7f7f"),o("ac6a"),{data:function(){return{optionsDatas:[{id:"1",name:"默认",subs:[{id:"1",name:"默认"},{id:"1-2",name:"价格由高到低"},{id:"1-3",name:"销量由高到低"}]},{id:"2",name:"有货优先",subs:[]},{id:"3",name:"直营优先",subs:[]}],selectOption:{},isShowSubContent:!1}},created:function(){this.selectOption=this.optionsDatas[0]},methods:{onOptionsItemClick:function(t,s){this.isShowSubContent?this.isShowSubContent=!1:(t.subs.length>0&&this.selectOption.id===t.id&&(this.isShowSubContent=!0),this.selectOption=t)},onSubOptionsItemClick:function(t,s){this.selectOption=t,this.optionsDatas.forEach(function(s){s.subs.forEach(function(o){o.id===t.id&&(s.id=o.id,s.name=o.name)})}),this.isShowSubContent=!1}},watch:{selectOption:function(t,s){this.$emit("optionsChange",t)}}}),r=l,u=(o("c9eb"),o("2877")),d=Object(u["a"])(r,a,c,!1,null,"4512b7c0",null),p=d.exports,h=o("2374"),f={name:"goodsList",components:{NavgationBar:n["a"],GoodsOptions:p,goods:h["a"]},data:function(){return{isIphoneX:window.isIphoneX,sortType:"1",layoutTypeDatas:[{type:"1",icon:o("0983")},{type:"2",icon:o("d628")},{type:"3",icon:o("33f6")}],layoutType:{}}},created:function(){this.layoutType=this.layoutTypeDatas[0]},methods:{onBackClick:function(){this.$router.go(-1)},onOptionsChange:function(t){this.sortType=t.id},onChangelayoutTypeClick:function(){"1"===this.layoutType.type?this.layoutType=this.layoutTypeDatas[1]:"2"===this.layoutType.type?this.layoutType=this.layoutTypeDatas[2]:this.layoutType=this.layoutTypeDatas[0]}}},g=f,m=(o("f226"),Object(u["a"])(g,e,i,!1,null,"1989e582",null));s["default"]=m.exports},d628:function(t,s,o){t.exports=o.p+"img/grid-type.7f8e781b.svg"},e33b:function(t,s,o){"use strict";var e=o("7d4b"),i=o.n(e);i.a},e3f1:function(t,s,o){},f226:function(t,s,o){"use strict";var e=o("4eb5"),i=o.n(e);i.a}}]);
//# sourceMappingURL=chunk-d065da5c.e4317180.js.map